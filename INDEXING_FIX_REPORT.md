# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞**: `The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable`

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–∞—Ç—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `pageindex_ollama.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `ollama_client` –∏ `ollama_async_client`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ç—á–∏–Ω–≥–∞.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

```python
# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
_ollama_base_url = DEFAULT_OLLAMA_BASE_URL
_ollama_model = DEFAULT_OLLAMA_MODEL
_patched = False
_ollama_client = None  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
_ollama_async_client = None  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
```

### 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

```python
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–ª–∏–µ–Ω—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø–∞—Ç—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
global _ollama_client, _ollama_async_client
_ollama_client = ollama_client
_ollama_async_client = ollama_async_client
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –ø–∞—Ç—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

–í—Å–µ –ø–∞—Ç—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:
- `patched_ChatGPT_API` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_ollama_client`
- `patched_ChatGPT_API_with_finish_reason` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_ollama_client`
- `patched_ChatGPT_API_async` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_ollama_async_client`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ü–∞—Ç—á–∏–Ω–≥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
‚úÖ **–ö–ª–∏–µ–Ω—Ç—ã Ollama –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –ø–∞—Ç—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö**
‚úÖ **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ api_key**

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

