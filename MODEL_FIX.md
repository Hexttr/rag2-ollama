# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–¥–µ–ª—å—é

## –ü—Ä–æ–±–ª–µ–º–∞
–í –ª–æ–≥–∞—Ö –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
```
'model requires more system memory (46.9 GiB) than is available (41.0 GiB)'
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ, —á—Ç–æ –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –±–æ–ª—å—à–∞—è –º–æ–¥–µ–ª—å –≤–º–µ—Å—Ç–æ `phi3:3.8b`.

## –ü—Ä–∏—á–∏–Ω–∞
1. –í PageIndex –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –º–æ–¥–µ–ª–∏ `"gpt-4o-2024-11-20"`
2. –ö–æ–≥–¥–∞ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–ª–∏—Å—å –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏–ª–∏ —Å `model=None`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –º–æ–¥–µ–ª—å OpenAI
3. –ü–∞—Ç—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ç—á–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π
–í—Å–µ –ø–∞—Ç—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`ChatGPT_API`, `ChatGPT_API_async`, `ChatGPT_API_with_finish_reason`) —Ç–µ–ø–µ—Ä—å **–≤—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥–µ–ª—å –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Ollama, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å.

**–§–∞–π–ª—ã:**
- `pageindex_ollama.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ç—á–∏–Ω–≥
- `backend/app/services/pageindex_service.py` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ç—á–∏–Ω–≥

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `get_page_tokens`
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –º–æ–¥–µ–ª–∏ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get_page_tokens()`.

**–§–∞–π–ª:** `PageIndex/pageindex/page_index.py`

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_page_tokens`
–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–µ–ª–µ–π Ollama - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π encoding `cl100k_base` –≤–º–µ—Å—Ç–æ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å encoding –¥–ª—è OpenAI –º–æ–¥–µ–ª–µ–π.

**–§–∞–π–ª:** `PageIndex/pageindex/utils.py`

## –†–µ–∑—É–ª—å—Ç–∞—Ç
–¢–µ–ø–µ—Ä—å –≤—Å–µ –≤—ã–∑–æ–≤—ã LLM –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥–µ–ª—å `phi3:3.8b` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é.

## –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `phi3:3.8b` –∏ –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∂–∞—Ç—å –±–æ–ª—å—à–∏–µ –º–æ–¥–µ–ª–∏.

